<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Clinton Campbell">
        <link rel="canonical" href="https://info314.tcpip.dev/resources/manage-dhcp/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Troubleshooting DHCP - INFO 314 Course Resources</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/color-brewer.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">INFO 314 Course Resources</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">1 - Pi Setup</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../assignments/pi-setup/">Raspberry Pi Setup</a>
</li>
            
<li >
    <a href="../../assignments/networkd-setup/">networkd Setup</a>
</li>
            
<li >
    <a href="../wifi-reference/">Wifi Reference</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Labs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../assignments/lab1/">Lab 1 - Core Technical Skills</a>
</li>
                                    
<li >
    <a href="../../assignments/lab2/">Lab 2 - Analyzing DHCP and ARP with Wireshark</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Concepts and Theory</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../notes/dns-overview/">Domain Name System (DNS)</a>
</li>
            
<li >
    <a href="../../notes/router-overview/">Routers</a>
</li>
            
<li >
    <a href="../../notes/ethernet-switches/">Ethernet Switches</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Guides</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../pi-materials/">Getting Pi Materials</a>
</li>
            
<li >
    <a href="../digital-ocean/">Digital Ocean Signup</a>
</li>
            
<li >
    <a href="../address-planning/">Basic IP Address Planning</a>
</li>
            
<li >
    <a href="../iptables/">Introduction to Iptables</a>
</li>
            
<li >
    <a href="../netfilter-hooks/">Understanding Netfilter/Iptables Hooks</a>
</li>
            
<li >
    <a href="../wifi-reference/">Linux Wireless Configuration</a>
</li>
            
<li >
    <a href="../zone-file-format/">Zone File Reference</a>
</li>
            
<li >
    <a href="../vlans-and-dummies/">Special Network Interfaces (VLANs and Dummies)</a>
</li>
            
<li >
    <a href="../configure-routing-links/">Configuring Routing Links</a>
</li>
            
<li >
    <a href="../setup-frr/">Install Free Range Routing (FRR)</a>
</li>
            
<li >
    <a href="../ssh-agent/">Using ssh-agent</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Quick Reference</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../markdown/">Intro to Markdown</a>
</li>
            
<li >
    <a href="../bash/">Intro to Bash</a>
</li>
            
<li >
    <a href="../host-config/">Mac/Win/Linux Networking</a>
</li>
            
<li >
    <a href="../wireshark-install/">Install Wireshark</a>
</li>
            
<li >
    <a href="../tshark-install/">Install TShark</a>
</li>
            
<li class="active">
    <a href="./">Troubleshooting DHCP</a>
</li>
            
<li >
    <a href="../dns-clients/">Managing DNS Clients</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../contact/">Contact Us</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../tshark-install/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../dns-clients/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/quirktree/info314-website">quirktree/info314-website</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#dhcp">DHCP</a></li>
            <li><a href="#renew-dhcp-lease">Renew dhcp lease</a></li>
            <li><a href="#general-troubleshoot">General Troubleshoot</a></li>
            <li><a href="#troubleshooting-isc-dhcp-server">Troubleshooting ISC DHCP Server</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="dhcp">DHCP<a class="headerlink" href="#dhcp" title="Permanent link">&para;</a></h1>
<blockquote>
<p>DHCP advice will be updated and rolled out to this page.
Reminder that the service <strong><code>dhcpd</code></strong> will handle dhcp for us.</p>
</blockquote>
<h3 id="renew-dhcp-lease">Renew dhcp lease<a class="headerlink" href="#renew-dhcp-lease" title="Permanent link">&para;</a></h3>
<hr />
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<blockquote>
<p>dhcp renewal is when a dhcp client (your laptop, phone, tablet...) renews or updates its IP address cofniguration with the dhcp server. Often times in our homes the dhcp server is already packaged in our router <a href="https://www.serverbrain.org/network-services-2003/how-the-dhcp-lease-renewal-process-works-1.html">source</a>.</p>
</blockquote>
</div>
<p><strong>Unix (Mac OS)</strong>: <br></p>
<blockquote>
<p>This steps below are necessary since the renew button for mac os only does a shortened DHCP exchange.</p>
</blockquote>
<ul>
<li>Go to Network Preferences &gt;&gt; Select interface &gt;&gt; Advanced -&gt; TCP/IP, Turn off IPv4 Addressing (hit OK + Apply)</li>
<li>Return to advanced settings and enable DHCP. </li>
</ul>
<p><strong>Windows</strong>:</p>
<ul>
<li>Open a command prompt</li>
<li>run <code>ipconfig /release Wi-Fi</code> to release your IP address</li>
<li>then run <code>ipconfig /renew</code> to request a new one</li>
</ul>
<p><strong>Linux</strong>: </p>
<ul>
<li><code>sudo dhclient -r eth0</code></li>
<li><code>sudo dhclient eth0</code></li>
</ul>
<h3 id="general-troubleshoot">General Troubleshoot<a class="headerlink" href="#general-troubleshoot" title="Permanent link">&para;</a></h3>
<hr />
<blockquote>
<p>Follow the checklist below if you had dhcp previously working and it recently failed.</p>
</blockquote>
<ul>
<li>Check DHCP errors <code>journalctl -u isc-dhcp-server</code></li>
<li>check subnet range in <code>dhcpd.conf</code> </li>
<li>Check what wifi your pi is using the appropriate wifi</li>
<li><code>wpa_cli -i wlan0 status</code> </li>
<li>Make sure both <code>dhcpd</code> and <code>systemd</code> are declaring the same statis IP for the Pi.</li>
<li>Check your leases in <code>at /var/lib/dhcp/dhcpd.leases</code></li>
</ul>
<h3 id="troubleshooting-isc-dhcp-server">Troubleshooting ISC DHCP Server<a class="headerlink" href="#troubleshooting-isc-dhcp-server" title="Permanent link">&para;</a></h3>
<hr />
<blockquote>
<p>Follow steps below if you are having trouble getting your ISC DHCP server setup for the first time.</p>
</blockquote>
<p>Raspbian provides us with several commands to troubleshoot and find errors related to services. Check status and recent log output using <code>systemctl status isc-dhcp-server.service</code> or <code>journalctl -xe</code>  .</p>
<p>Search the system logs for relevant errors <code>journalctl -u isc-dhcp-server</code></p>
<p>As you debug, keep the following points in mind:</p>
<ul>
<li>A misplaced space or bracket may cause DHCP to fail, so pay close attention to syntax.</li>
<li>Your Pi will keep it's static address, so be sure that you excluded the address from the DHCP pool.</li>
<li>Double check that you’ve configured the server defaults with the correct interface names and commented out IPv6 related settings.</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 Clinton Campbell</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
