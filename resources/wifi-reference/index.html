<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Clinton Campbell">
        <link rel="canonical" href="https://info314.tcpip.dev/resources/wifi-reference/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>wpa_supplicant Reference - INFO 314 Course Resources</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/color-brewer.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">INFO 314 Course Resources</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">1 - Pi Setup</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../assignments/pi-setup/" class="dropdown-item">Raspberry Pi Setup</a>
</li>
            
<li>
    <a href="./" class="dropdown-item">Wireless Configuration Reference</a>
</li>
            
<li>
    <a href="../uw-wireless/" class="dropdown-item">UW Wireless Reference</a>
</li>
            
<li>
    <a href="../../assignments/networkd-setup/" class="dropdown-item">networkd Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2 - Set up a DHCP Server</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../address-planning/" class="dropdown-item">IP Address Planning Reference</a>
</li>
            
<li>
    <a href="../../assignments/dhcp-setup/" class="dropdown-item">Installing and Configuring the ISC DHCP Server</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">3 - Configure Routing and NAT</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../assignments/router-setup/" class="dropdown-item">Router Setup</a>
</li>
            
<li>
    <a href="../nftables/" class="dropdown-item">Introduction to nftables</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">4 - Configure a DNS Resolver</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../assignments/resolver-setup/" class="dropdown-item">DNS Resolver Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Report - NAT and DNS Analysis</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../assignments/analysis-report/" class="dropdown-item">Instructions</a>
</li>
            
<li>
    <a href="../tshark-install/" class="dropdown-item">Installing TShark</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">5 - Configure an Authoritative Name Server</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../assignments/dns-zone-setup/" class="dropdown-item">Authoritative Zone Setup</a>
</li>
            
<li>
    <a href="../zone-file-format/" class="dropdown-item">DNS Zone Reference</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Extra Credit</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="/" class="dropdown-item">VLAN Challenge</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Labs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../assignments/wireshark01/" class="dropdown-item">Lab 1 - Analyzing DHCP and ARP with Wireshark</a>
</li>
                                    
<li>
    <a href="../../assignments/wireshark02/" class="dropdown-item">Lab 2 - Analyze DNS & HTTP in Wireshark</a>
</li>
                                    
<li>
    <a href="../../assignments/wireshark03/" class="dropdown-item">Lab 3 - Analyze Zeroconf in Wireshark</a>
</li>
                                    
<li>
    <a href="../../assignments/wireshark04/" class="dropdown-item">Lab 4 - Analyze TCP with ncat and Wireshark</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../markdown/" class="dropdown-item">Intro to Markdown</a>
</li>
            
<li>
    <a href="../bash/" class="dropdown-item">Intro to Bash</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Concepts and Theory</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../address-planning/" class="dropdown-item">Basic IP Address Planning</a>
</li>
            
<li>
    <a href="../../notes/dns-overview/" class="dropdown-item">Domain Name System (DNS)</a>
</li>
            
<li>
    <a href="../zone-file-format/" class="dropdown-item">DNS Zone Files</a>
</li>
            
<li>
    <a href="../../notes/ethernet-switches/" class="dropdown-item">Ethernet Switches</a>
</li>
            
<li>
    <a href="../../notes/router-overview/" class="dropdown-item">Routers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Core Settings and Tools</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../ssh-primer/" class="dropdown-item">Getting Started with SSH</a>
</li>
            
<li>
    <a href="../ssh-agent/" class="dropdown-item">Using the SSH Agent</a>
</li>
            
<li>
    <a href="../wireshark-install/" class="dropdown-item">Install Wireshark</a>
</li>
            
<li>
    <a href="../tshark-install/" class="dropdown-item">Install TShark</a>
</li>
            
<li>
    <a href="../host-config/" class="dropdown-item">Mac/Win/Linux Networking</a>
</li>
            
<li>
    <a href="../manage-dhcp/" class="dropdown-item">Troubleshooting DHCP</a>
</li>
            
<li>
    <a href="../dns-clients/" class="dropdown-item">Managing DNS Clients</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">General Linux Networking</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Firewalls</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../nftables/" class="dropdown-item">Introduction to nftables</a>
</li>
            
<li>
    <a href="../netfilter-hooks/" class="dropdown-item">Understanding netfilter Hooks</a>
</li>
            
<li>
    <a href="../iptables/" class="dropdown-item">Introduction to iptables</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Network Interfaces</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../loopback-interfaces/" class="dropdown-item">Loopback Interfaces</a>
</li>
            
<li>
    <a href="../dummy-interfaces/" class="dropdown-item">Dummy Interfaces</a>
</li>
            
<li>
    <a href="../vlan-interfaces/" class="dropdown-item">VLAN Interfaces</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Virtual Private Networking</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../setup-wireguard/" class="dropdown-item">Install and Configure WireGuard</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Wireless</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active">wpa_supplicant Reference</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Free Range Routing</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../setup-frr/" class="dropdown-item">Install Free Range Routing (FRR)</a>
</li>
            
<li>
    <a href="../configure-routing-links/" class="dropdown-item">Configuring Routing Links</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">University of Washington Networks</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../uw-wireless/" class="dropdown-item">UW Wireless Network Reference</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../setup-wireguard/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../setup-frr/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/quirktree/info314-website" class="nav-link">quirktree/info314-website</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#wpa-supplicant-configuration-reference-2022-03-29" class="nav-link">WPA Supplicant Configuration Reference (2022-03-29)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#basic-configuration" class="nav-link">Basic Configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#unencrypted-networks" class="nav-link">Unencrypted Networks</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#wpa2-personal-networks" class="nav-link">WPA2 Personal Networks</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#wpa2-enterprise-networks" class="nav-link">WPA2 Enterprise Networks</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#applying-configuration-changes" class="nav-link">Applying Configuration Changes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="wpa-supplicant-configuration-reference-2022-03-29">WPA Supplicant Configuration Reference (2022-03-29)<a class="headerlink" href="#wpa-supplicant-configuration-reference-2022-03-29" title="Permanent link">&para;</a></h1>
<h2 id="basic-configuration">Basic Configuration<a class="headerlink" href="#basic-configuration" title="Permanent link">&para;</a></h2>
<p>Wireless settings for the Pi are controlled by a service called <strong>wpa_supplicant</strong>, which stores information about known wireless networks in a text-based configuration file in <strong><code>/etc/wpa_supplicant/</code></strong>. By default, in Raspberry Pi OS, the name of this file is <strong><code>wpa_supplicant.conf</code></strong>. You may also encounter an interface-specific configuration where the interface name is appended to the file, e.g., <strong><code>wpa_supplicant-wlan0.conf</code></strong>. In both cases, the file is owned by <strong>root</strong> and requires <strong>root</strong> privileges to read or edit. To learn more about <strong>wpa_supplicant</strong>, run the command ` </p>
<details class="danger">
<summary>Security Risk</summary>
<p><strong><code>wpa_supplicant.conf</code></strong> is protected from casual reading due to the fact that it is a sensitive file that might contain the password to your home network or even the password for your school/work account.</p>
<p>Practice caution with this file:</p>
<ol>
<li>Never share the contents of this file directly online.</li>
<li>Scrub passwords, keys, and hashes before committing a copy into a <strong>repository</strong>.</li>
<li>Reset passwords if you lose your Pi or suspect that you may have disclosed it inadvertently.</li>
</ol>
</details>
<p>You can edit <strong>wpa_supplicant</strong> configs directly on the Pi using any terminal-based text editor. Alternatively, you can create the file on your local system and copy it into place on the Pi (as described later in this guide). </p>
<details class="warning">
<summary>Warning: Windows line-endings and rich text format</summary>
<p>As students get started with Linux networking, we frequently encounter problems related to the overall file format. As a rule, the configuration files you create in this class must be plain text with standard line endings. </p>
<p>You'll want to stick to using a code-oriented text editor, as opposed to options like macOS TextEdit and Windows Notepad that often save files as <em>rich text</em> rather than plain text.</p>
<p>For Windows users, a code-oriented editor will also help you avoid issues related to line endings. While most operating systems use a simple <em>New Line (aka Line Feed)</em> control character to signify the end of a line, most Windows tools also include a <em>Carriage Return</em>. This alternate line ending causes parsing errors in many Linux tools.</p>
</details>
<p>The general structure of the configuration file is show below. The file begins with a standard set of parameters specifying the <strong>country</strong> (needed to initialize appropriate radio settings), a <strong>control interface</strong> used by network management tools, and a boolean that instructs <strong>wpa_supplicant</strong> to accept configuration updates from other network management tools. We won't delve any deeper into the meaning of these initial parameters for now. Rather, our concern will be how to configure Linux to join nearby wireless networks.</p>
<div class="admonition example">
<p class="admonition-title">Example <code>wpa_supplicant.conf</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>country=US
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>update_config=1
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>network={
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    ssid=&quot;Some public network&quot;
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    key_mgmt=NONE
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>}
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>network={
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    ssid=&quot;My home network&quot;
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    psk=&quot;Don&#39;t tell anyone the password&quot;
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>}
</code></pre></div>
</div>
<p>Each network is represented by a configuration block that surrounded by <code>network={...}</code>. The contents of the network block will depend largely on the security settings of the network, e.g., whether or not the network is encrypted with a passphrase. This document provides instructions for configuring three common types of networks: </p>
<ol>
<li>Unencrypted Networks</li>
<li>WPA2 Personal Networks (simple passphrase)</li>
<li>WPA2 Enterprise Networks</li>
</ol>
<p>Let's start by examining the configuration for an unencrypted network.</p>
<h2 id="unencrypted-networks">Unencrypted Networks<a class="headerlink" href="#unencrypted-networks" title="Permanent link">&para;</a></h2>
<p>All networks are defined by <code>parameter=value</code> pairs enclosed within <code>network={}</code>. Regardless of security configuration, each network block is required to contain an <strong><code>ssid</code></strong> parameter identifying the network. The <strong>service set identifier (SSID)</strong> is the network name that you see on your device when you connect to a wireless network. Since this name may include whitespace, we encapsulate it in double quotes.</p>
<p>In addition to the <strong>ssid</strong>, <strong>wpa_supplicant</strong> expects us to provide encryption a passphrase and other encryption settings for the wireless network. Omitting these settings, even for an unencrypted network, will result in errors. </p>
<p>Instead, for unencrypted networks, we explicitly disable encryption with <strong><code>key_mgmt=NONE</code></strong>.</p>
<div class="admonition example">
<p class="admonition-title">Configuration for an unencrypted network</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>network={
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    ssid=&quot;Coffee Shop&quot;
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    key_mgmt=NONE
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>}
</code></pre></div>
</div>
<h2 id="wpa2-personal-networks">WPA2 Personal Networks<a class="headerlink" href="#wpa2-personal-networks" title="Permanent link">&para;</a></h2>
<p>For a basic (non-enterprise) encrypted network, the configuration of the network block changes only slightly. Rather than specify the <code>key_mgmt</code> setting, we assign the network passphrase to the <code>psk</code> parameter.</p>
<p>There are two ways to accomplish this task. First, we can assign the passphrase directly to the parameter in plaintext as shown here:</p>
<div class="admonition danger">
<p class="admonition-title">Danger: Don't do this!!!</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>network={
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    ssid=&quot;Home Wifi&quot;
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    psk=&quot;super secret squirrels&quot;
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>}
</code></pre></div>
</div>
<p>Security professionals generally frown on plaintext passwords and passphrases being written to configuration files or code. As such, we prefer to write the configuration based on the raw network key (computed using a function called <em>PBKDF</em> in conjunction with <em>SHA1</em>).</p>
<div class="admonition faq">
<p class="admonition-title">Using <code>wpa_passphrase</code> to generate a raw PSK</p>
<p>You can generate the raw psk directly on your Pi by running the <code>wpa_passphrase</code> utility. This utility takes your SSID as an argument and then prompts you to enter your passphrase. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Pass your SSID as the first argument</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>wpa_passphrase <span class="s2">&quot;Home Wifi&quot;</span>
</code></pre></div>
<p>You will not see any characters or placeholders echoed as you type the passphrase, but <strong><code>wpa_passphrase</code></strong> will continue to accept input until you hit <em>Enter/Return</em>. The output will be a valid <strong>wpa_supplicant</strong> configuration that you can paste into your configuration.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>network={
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    ssid=&quot;Home Wifi&quot;
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    psk=2508539ff867a3578f6ba7d9ee1d4a62aea82c25d30ffb1eb3a05cd08a373c02
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>}
</code></pre></div>
</div>
<h2 id="wpa2-enterprise-networks">WPA2 Enterprise Networks<a class="headerlink" href="#wpa2-enterprise-networks" title="Permanent link">&para;</a></h2>
<p>Unlike home and coffee shop networks, enterprise networks like <em><a href="https://eduroam.org/">eduroam</a></em>, require a bit more setup since they authenticate individual users to the network as part of the process of establishing an encrypted connection. As such, these networks can provide substantially more security than networks that are protected by <strong>WPA2 Personal</strong>. They're also much more flexible. For example, once you have properly configured <em>eduroam</em> to connect on your campus, you will also be able to get online at other schools offering <em>eduroam</em> hotspots.</p>
<h3 id="certificate-based-authentication">Certificate-based Authentication<a class="headerlink" href="#certificate-based-authentication" title="Permanent link">&para;</a></h3>
<p>Enterprise networks utilizing certificate-based authentication rely on EAP-TLS mode of operation. Public key authentication has many security benefits over password-based mechanisms, though the process of onboarding new users and devices is more complex. Users on these networks are required to register or enroll in order to obtain a client identity certificate. </p>
<p>Before you attempt to add an EAP-TLS network to wpa_supplicant, you must complete the onboarding process and install certificates onto your device. For University of Washington students, faculty, and staff, we have documented onboarding and certificate installation in separately <em><a href="/resources/uw-wireless/#eduroam-onboarding" target="_blank">(click here)</a></em>.</p>
<div class="admonition info">
<p class="admonition-title">Eduroam configuration template (EAP-TLS)</p>
<p>The majority of the values needed for this template will be provided by your organization during onboarding.</p>
<p>For <strong><ENCRYPTION_MODES></strong>, your organization most likely supports <strong>CCMP</strong>, which is a mode of <strong>AES</strong> encryption. If you're unsure, enter <strong>CCMP TKIP</strong> to allow for legacy encryption support (not recommended).</p>
<p>All path names will be dependent on the installation location for your certificates.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>network={
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    priority=10
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    ssid=&quot;eduroam&quot;
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    scan_ssid=1
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    key_mgmt=WPA-EAP
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    proto=RSN
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    pairwise=&lt;ENCRYPTION_MODES&gt;
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    group=&lt;ENCRYPTION_MODES&gt;
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    eap=TLS
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>    identity=&quot;&lt;IDENTITY&gt;&quot;
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>    anonymous_identity=&quot;&lt;ANONYMOUS_IDENTITY&gt;&quot;
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    ca_cert=&quot;&lt;/PATH/TO/CA_CERT.PEM&gt;&quot;
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    client_cert=&quot;&lt;/PATH/TO/CLIENT_CERT.PEM&gt;&quot;
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>    private_key=&quot;&lt;/PATH/TO/PRIVATE_KEY.PEM&gt;&quot;
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>    domain_match=&quot;&lt;DOMAIN&gt;&quot;
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>    phase2=&quot;auth=&lt;INNER_EAP_TYPE&gt;&quot;
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>}
</code></pre></div>
</div>
<h3 id="password-based-authentication">Password-based Authentication<a class="headerlink" href="#password-based-authentication" title="Permanent link">&para;</a></h3>
<p>Password-based authentication can be set up for an enterprise wireless network by leveraging the Protected Extensible Authentication Protocol (PEAP) and the Microsoft Challenge Authentication Protocol version 2 (MSCHAPv2) to authenticate network clients based on a previously registered username and passphrase.</p>
<p>The following template configures wpa_supplicant for PEAP/MSCHAPv2 authentication on an Eduroam network. Add it to your <strong><code>wpa_supplicant.conf</code></strong>, substituting your own username and password hash for the supplied values.</p>
<details class="danger">
<summary>Avoid Credential Exposure</summary>
<p>If implemented poorly, PEAP can expose your password to a malicious network operator. To prevent attacks, include the Certificate Authority (CA) certificate<sup id="fnref:cacert"><a class="footnote-ref" href="#fn:cacert">1</a></sup> in your wpa_supplicant configuration. Without this information, the wireless client may send password information to an evil twin (malicious network posing as one you trust). </p>
<p>Likewise, we advise against hard-coding your plaintext school or work password into the wireless configuration file. Instead, compute an MD4 hash from your password and substitute it for the password. MD4 is a weak hash and fairly vulnerable to password cracking, but combined with a strong password, it does provide a layer of protection if your device is lost or stolen. </p>
<p>Follow these commands in order to compute the MD4 hash in Linux. The <em>history</em> commands are not needed to compute a hash but are added for security. Without them, your password will be stored in the Bash history file and easily readable to anyone with access to your memory card.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nb">set</span> +o <span class="nb">history</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nb">echo</span> -n <span class="s1">&#39;This is your password&#39;</span> <span class="p">|</span> iconv -t utf16le <span class="p">|</span> openssl md4
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1"># You should see output like 6f9bad2c90b80bd549e595fc91e27806</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="nb">set</span> -o <span class="nb">history</span>
</code></pre></div>
</details>
<details class="info">
<summary>Eduroam configuration template (EAP-PEAP)</summary>
<p><strong>This configuration is no longer supported on University of Washington's eduroam network (effective Feb 1, 2022).</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>network={
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>        ssid=&quot;eduroam&quot;
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>        scan_ssid=1
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>        key_mgmt=WPA-EAP
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>        proto=RSN
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>        eap=PEAP
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>        identity=&quot;&lt;USERNAME&gt;@&lt;ORGANIZATION_DOMAIN&gt;&quot;
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>        password=hash:6f9bad2c90b80bd549e595fc91e27806
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>        ca_cert=&quot;&lt;/PATH/TO/CA_CERT.PEM&gt;&quot;
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>        phase1=&quot;peaplabel=0&quot;
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>        phase2=&quot;auth=MSCHAPV2&quot;
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>}
</code></pre></div>
</details>
<h2 id="applying-configuration-changes">Applying Configuration Changes<a class="headerlink" href="#applying-configuration-changes" title="Permanent link">&para;</a></h2>
<p>Like other services, <strong>wpa_supplicant</strong> will not load our changes automatically. Rather than reset the daemon completely using <strong><code>systemctl</code></strong>, we can use <strong><code>wpa_cli</code></strong> to update the configuration and perform other basic maintenance.</p>
<p>When running <strong><code>wpa_cli</code></strong> we need to specify the interface we are configuring and a command to send to the <strong>wpa_supplicant</strong> service.</p>
<div class="admonition instructions">
<p class="admonition-title">Load configuration from <code>wpa_supplicant.conf</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># Update configuration from disk
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>wpa_cli -i wlan0 reconfigure
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a># Check the status of current connection
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>wpa_cli -i wlan0 status
</code></pre></div>
</div>
<p>See <strong><code>man wpa_cli</code></strong> for further instructions and examples.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:cacert">
<p>Obtain this file from your organization's IT department.&#160;<a class="footnote-backref" href="#fnref:cacert" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2022 Clinton Campbell</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
