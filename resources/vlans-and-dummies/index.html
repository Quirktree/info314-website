<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Clinton Campbell">
        <link rel="canonical" href="https://info314.tcpip.dev/resources/vlans-and-dummies/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Special Network Interfaces (VLANs and Dummies) - INFO 314 Course Resources</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/color-brewer.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">INFO 314 Course Resources</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">1 - Pi Setup</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../assignments/pi-setup/">Raspberry Pi Setup</a>
</li>
            
<li >
    <a href="../../assignments/networkd-setup/">networkd Setup</a>
</li>
            
<li >
    <a href="../wifi-reference/">Wifi Reference</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">2 - Set up a DHCP Server</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../address-planning/">IP Address Planning Reference</a>
</li>
            
<li >
    <a href="../../assignments/dhcp-setup/">Installing and Configuring the ISC DHCP Server</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">3 - Configure Routing and NAT</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../assignments/router-setup/">Router Setup</a>
</li>
            
<li >
    <a href="../iptables/">Introduction to iptables</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">4 - Configure a DNS Resolver</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../assignments/resolver-setup/">DNS Resolver Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Report - NAT and DNS Analysis</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../assignments/analysis-report/">Instructions</a>
</li>
            
<li >
    <a href="../tshark-install/">Installing TShark</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">5 - Configure an Authoritative Name Server</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../assignments/dns-zone-setup/">Authoritative Zone Setup</a>
</li>
            
<li >
    <a href="../zone-file-format/">DNS Zone Reference</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Labs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../assignments/lab1/">Lab 1 - Core Technical Skills</a>
</li>
                                    
<li >
    <a href="../../assignments/lab2/">Lab 2 - Analyzing DHCP and ARP with Wireshark</a>
</li>
                                    
<li >
    <a href="../../assignments/lab3/">Lab 3 - Analyze Zeroconf in Wireshark</a>
</li>
                                    
<li >
    <a href="../../assignments/lab4/">Lab 4 - Analyze DNS & HTTP in Wireshark</a>
</li>
                                    
<li >
    <a href="../../assignments/lab5/">Lab 5 - Analyze TCP with ncat and Wireshark</a>
</li>
                                    
<li >
    <a href="../../assignments/lab6/">Lab 6 - Python and Socket Basics</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Proxy Labs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../assignments/proxy-labs/">Proxy Project Overview</a>
</li>
            
<li >
    <a href="../../assignments/lab7/">Proxy Part 1 (Lab 7)</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Concepts and Theory</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../notes/dns-overview/">Domain Name System (DNS)</a>
</li>
            
<li >
    <a href="../../notes/router-overview/">Routers</a>
</li>
            
<li >
    <a href="../../notes/ethernet-switches/">Ethernet Switches</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Guides</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../pi-materials/">Getting Pi Materials</a>
</li>
            
<li >
    <a href="../digital-ocean/">Digital Ocean Signup</a>
</li>
            
<li >
    <a href="../address-planning/">Basic IP Address Planning</a>
</li>
            
<li >
    <a href="../iptables/">Introduction to Iptables</a>
</li>
            
<li >
    <a href="../netfilter-hooks/">Understanding Netfilter/Iptables Hooks</a>
</li>
            
<li >
    <a href="../wifi-reference/">Linux Wireless Configuration</a>
</li>
            
<li >
    <a href="../zone-file-format/">Zone File Reference</a>
</li>
            
<li class="active">
    <a href="./">Special Network Interfaces (VLANs and Dummies)</a>
</li>
            
<li >
    <a href="../configure-routing-links/">Configuring Routing Links</a>
</li>
            
<li >
    <a href="../setup-frr/">Install Free Range Routing (FRR)</a>
</li>
            
<li >
    <a href="../ssh-agent/">Using ssh-agent</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Quick Reference</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../markdown/">Intro to Markdown</a>
</li>
            
<li >
    <a href="../bash/">Intro to Bash</a>
</li>
            
<li >
    <a href="../host-config/">Mac/Win/Linux Networking</a>
</li>
            
<li >
    <a href="../wireshark-install/">Install Wireshark</a>
</li>
            
<li >
    <a href="../tshark-install/">Install TShark</a>
</li>
            
<li >
    <a href="../manage-dhcp/">Troubleshooting DHCP</a>
</li>
            
<li >
    <a href="../dns-clients/">Managing DNS Clients</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li >
                                <a href="../../contact/">Contact Us</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../zone-file-format/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../configure-routing-links/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/quirktree/info314-website">quirktree/info314-website</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#configuring-vlans-and-dummy-interfaces-in-networkd">Configuring VLANs and Dummy Interfaces in Networkd</a></li>
            <li><a href="#vlans">VLANs</a></li>
            <li><a href="#dummy-interfaces">Dummy Interfaces</a></li>
            <li><a href="#resources">Resources</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="configuring-vlans-and-dummy-interfaces-in-networkd">Configuring VLANs and Dummy Interfaces in Networkd<a class="headerlink" href="#configuring-vlans-and-dummy-interfaces-in-networkd" title="Permanent link">&para;</a></h1>
<h2 id="vlans">VLANs<a class="headerlink" href="#vlans" title="Permanent link">&para;</a></h2>
<p>VLAN functionality in networkd enables Linux hosts to participate in VLANs based on explicit tagging of ethernet frames. VLANs provide a valuable layer of logical configurability on top of physical network infrastructure. VLAN connections are presented in Linux as software-defined network interfaces that can be configured and utilized just like other types of network interfaces.</p>
<h3 id="creating-vlan-interfaces">Creating VLAN Interfaces<a class="headerlink" href="#creating-vlan-interfaces" title="Permanent link">&para;</a></h3>
<p>Networkd supports various software-defined interface types that are created based on <code>.netdev</code> files in the networkd configuration directories. A <code>.netdev</code> for a VLAN sets <code>Kind=vlan</code> and defines the numeric ID used to tag VLAN traffic on the wire in order to keep it separate from other traffic. </p>
<div class="admonition example">
<p class="admonition-title">Creating a VLAN interface</p>
<p><strong><code>/etc/systemd/network/15-vlan25.netdev</code></strong></p>
<div class="codehilite"><pre><span></span>[NetDev]
Name=vlan25
Kind=vlan

[VLAN]
# Specify the tag
Id=25
</pre></div>

</div>
<h3 id="add-vlans-to-a-physical-interface">Add VLANs to a Physical Interface<a class="headerlink" href="#add-vlans-to-a-physical-interface" title="Permanent link">&para;</a></h3>
<p>In order to send and receive tagged traffic over a network link, we need to associate the newly created VLAN interfaces with the physical LAN interface. In networkd, this can be done by adding one or more VLAN properties to the physical interface's <code>.network</code> configuration. After doing this, tagged frames will be presented to the operating system as originating from the associated VLAN interface. Likewise, traffic that is sent through a VLAN interface will be tagged with the specified ID before being sent on the network.</p>
<div class="admonition example">
<p class="admonition-title">Linking a VLAN interface to a physical interface</p>
<p><strong><code>/etc/systemd/network/20-eth0.network</code></strong>
<div class="codehilite"><pre><span></span>[Match]
Name=eth0

[Network]
# Existing Configuration
Address=192.168.0.1/24

# Tagged VLANs Referenced by Interface Name
VLAN=vlan25
VLAN=vlan50
</pre></div></p>
</div>
<h3 id="network-configuration-for-vlan-interfaces">Network Configuration for VLAN Interfaces<a class="headerlink" href="#network-configuration-for-vlan-interfaces" title="Permanent link">&para;</a></h3>
<p>Attaching the VLANs to a physical interface enables traffic to be sent and received from the virtual interface via tagged frames on the physical link. At the moment, however, our VLAN interfaces do not have any network-level settings attached to them.</p>
<p>Depending on the task at hand and the configuration of the Linux host, you may configure the new interfaces by any method(s) available, including networkd:</p>
<div class="admonition example">
<p class="admonition-title">Sample VLAN interface configuration</p>
<p><strong><code>/etc/systemd/network/25-vlan25.network</code></strong></p>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">DHCP</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>[Match]
Name=vlan25

[Network]
DHCP=ipv4
</pre></div></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">Static IP</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span>[Match]
Name=vlan25

[Network]
Address=172.16.0.1/24
DNS=1.1.1.1
</pre></div></div>
</div>
</div>
<h2 id="dummy-interfaces">Dummy Interfaces<a class="headerlink" href="#dummy-interfaces" title="Permanent link">&para;</a></h2>
<p>When we set up labs with multiple services hosted on a single physical node, it can be useful to virtualize additional network connections and interfaces to allow us to extend the logical topology of the system. Dummy interfaces are treated much like standard network interfaces, although they do not require a physical connection and do not go up and down based on link status. Like a standard ethernet interface, a dummy interface can be configured with an IP address and other layer-3 settings. Likewise, we can bind daemons to sockets on our dummy interfaces and respond to network requests received at these addresses. </p>
<h3 id="creating-the-interface">Creating the Interface<a class="headerlink" href="#creating-the-interface" title="Permanent link">&para;</a></h3>
<p>Adding a .netdev definition with <code>Kind=dummy</code> will trigger networkd to add a dummy interface and make it visible to other standard networking tools.</p>
<div class="admonition example">
<p class="admonition-title">Creating a Dummy Interface</p>
<p><strong><code>/etc/systemd/network/10-dmz0.netdev</code></strong>
<div class="codehilite"><pre><span></span>[NetDev]
Name=dmz0
Kind=dummy
</pre></div></p>
</div>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/VLAN">https://wiki.archlinux.org/index.php/VLAN</a></li>
<li><a href="https://manpages.debian.org/stretch/systemd/systemd.netdev.5.en.html">https://manpages.debian.org/stretch/systemd/systemd.netdev.5.en.html</a></li>
<li><a href="https://wiki.archlinux.org/index.php/systemd-networkd">https://wiki.archlinux.org/index.php/systemd-networkd</a></li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 Clinton Campbell</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
