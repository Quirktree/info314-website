<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Clinton Campbell">
        <link rel="canonical" href="https://info314.tcpip.dev/assignments/lab3/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Lab 3 - INFO 314 Course Resources</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/color-brewer.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../..">INFO 314 Course Resources</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">1 - Pi Setup</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../pi-setup/">Raspberry Pi Setup</a>
</li>
            
<li >
    <a href="../networkd-setup/">networkd Setup</a>
</li>
            
<li >
    <a href="../../resources/wifi-reference/">Wifi Reference</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">2 - Set up a DHCP Server</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../resources/address-planning/">IP Address Planning Reference</a>
</li>
            
<li >
    <a href="../dhcp-setup/">Installing and Configuring the ISC DHCP Server</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">3 - Configure Routing and NAT</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../router-setup/">Router Setup</a>
</li>
            
<li >
    <a href="../../resources/iptables/">Introduction to iptables</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">4 - Configure a DNS Resolver</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../resolver-setup/">DNS Resolver Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Extra Credit</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../vlan-challenge/">VLAN Challenge</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Labs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../lab2/">Lab 2</a>
</li>
                                    
<li class="active">
    <a href="./">Lab 3</a>
</li>
                                    
<li >
    <a href="../lab4/">Lab 4</a>
</li>
                                    
<li >
    <a href="../lab5/">Lab 5</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Concepts and Theory</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../notes/router-overview/">Routers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Guides</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../resources/iptables/">Introduction to Iptables</a>
</li>
            
<li >
    <a href="../../resources/netfilter-hooks/">Understanding Netfilter/Iptables Hooks</a>
</li>
            
<li >
    <a href="../../resources/wifi-reference/">Linux Wireless Configuration</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Quick Reference</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../resources/markdown/">Intro to Markdown</a>
</li>
            
<li >
    <a href="../../resources/bash/">Intro to Bash</a>
</li>
            
<li >
    <a href="../../resources/host-config/">Mac/Win/Linux Networking</a>
</li>
            
<li >
    <a href="../../resources/wireshark-install/">Install Wireshark</a>
</li>
            
<li >
    <a href="../../resources/manage-dhcp/">Troubleshooting DHCP</a>
</li>
            
<li >
    <a href="../../resources/dns-clients/">Managing DNS Clients</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../lab2/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../lab4/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/quirktree/info314-website">quirktree/info314-website</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#lab-3-analyze-dns-http-in-wireshark">Lab 3 - Analyze DNS &amp; HTTP in Wireshark</a></li>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#part-i-website">Part I - website</a></li>
            <li><a href="#part-ii-dig">Part II - dig</a></li>
            <li><a href="#part-iii-dev-tools">Part III - dev tools</a></li>
            <li><a href="#part-iv-wireshark">Part IV - wireshark</a></li>
            <li><a href="#part-v-security">Part V - security</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="lab-3-analyze-dns-http-in-wireshark">Lab 3 - Analyze DNS &amp; HTTP in Wireshark<a class="headerlink" href="#lab-3-analyze-dns-http-in-wireshark" title="Permanent link">&para;</a></h1>
<p><a href="https://www.elegantthemes.com/blog/wp-content/uploads/2018/03/what-is-dns.png"><img alt="DNS image" src="https://www.elegantthemes.com/blog/wp-content/uploads/2018/03/what-is-dns.png" /></a></p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The purpose of this lab is for students to gain hands on experience with DNS. By the end of the lab you will be familiar with:</p>
<ul>
<li><strong><code>dig</code></strong> (or PowerShell's <strong><code>Resolve-DnsName</code></strong> command)</li>
<li>DNS queries</li>
<li>security faults of DNS</li>
</ul>
<p>We highly recommend using search engines to help you find solutions. As usual, there will be multiple ways to complete this lab. Please use the template provided on Canvas under the Assignment "Lab 3 - Analyze DNS &amp; HTTP in Wireshark" to complete your lab report.</p>
<h2 id="part-i-website">Part I - website<a class="headerlink" href="#part-i-website" title="Permanent link">&para;</a></h2>
<p>Pick a popular website that has a lot of content on it. Ideally it should contain advertisements. You will be using it throughout this lab.</p>
<p><strong>Report</strong>: </p>
<ol>
<li>What website did you select?</li>
</ol>
<h2 id="part-ii-dig">Part II - dig<a class="headerlink" href="#part-ii-dig" title="Permanent link">&para;</a></h2>
<p>Before jumping into more complicated scenarios we would like you to learn how to use the <strong><code>dig</code></strong> command as it is an incredibly helpful and simple tool.</p>
<p>We've provided some resources at <a href="/resources/dns-clients/#perform-dns-lookups-manually" target="_blank">Perform DNS Loookups Manually</a> to help you get started.</p>
<p>Use dig to lookup the domain name of the website you selected. Open up a new tab in your browser and enter (one of) the IP address(es) returned by dig to discover where it will take you. If dig returned more than one address, open up a second tab and enter it now.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Don't panic if you receive an error instead of a live site. Some servers host more than one website and need the name to help route you to the right place. Try another site, e.g., uw.edu, and see if you get different results.</p>
</div>
<p><strong>Report</strong>: </p>
<ol start="2">
<li>
<p>What addresses did the dig command return? Copy dig results to your report (code block or screenshot).</p>
</li>
<li>
<p>What did you observe when you browsed to the IP addresses directly?</p>
</li>
<li>
<p>Aside from <strong>A</strong> records containing IP addresses, did you discover any other DNS records from your query? List at least 3 other record types that DNS manages.</p>
</li>
<li>
<p>Look closely at the output of the dig command. How can you be sure that the query completed successfully? Identify the IP address of the server used to handle your query.</p>
</li>
</ol>
<h2 id="part-iii-dev-tools">Part III - dev tools<a class="headerlink" href="#part-iii-dev-tools" title="Permanent link">&para;</a></h2>
<p>Open up a new tab preferably in a chromium based browser (Chrome, Brave, etc...). Open up the dev tools (right click on page and click Inspect), and go to the <em>Network</em> option. </p>
<p>In that very same tab paste in your selected web page into the URL bar and click enter. You should see all of the <strong>GET</strong> and <strong>POST</strong> requests that the browser made for that webpage load up in the dev tools.</p>
<p>Right-click the header of the Network Log table and select Domain. The domain of each resource is now shown.</p>
<p><a href="https://developers.google.com/web/tools/chrome-devtools/network/imgs/tutorial/domain.png"><img alt="dev tools show domain" src="https://developers.google.com/web/tools/chrome-devtools/network/imgs/tutorial/domain.png" /></a></p>
<p>Take some time to scroll through the domains, files, and file types your website was requesting.</p>
<p><strong>Report</strong>: </p>
<ol start="6">
<li>
<p>From a quick glance what is the most common file type requested?</p>
</li>
<li>
<p>Approximately how many <em>domains</em> do you see in that list that don't matchup with the website domain you initially visited?</p>
</li>
<li>
<p>Why do you think this page is getting information from other websites?</p>
</li>
<li>
<p>If you had to guess, how many DNS requests do you think were sent in order to fully load this page?</p>
</li>
</ol>
<h2 id="part-iv-wireshark">Part IV - wireshark<a class="headerlink" href="#part-iv-wireshark" title="Permanent link">&para;</a></h2>
<p>Before examining DNS requests in Wireshark you will want to clear your DNS cache. Instructions on what that means, what it's for, and how to do so can be found here <a href="https://bwalchen.github.io/314-docs/trouble/dns/#clear-dns-cache">314-docs/trouble/dns</a>.</p>
<p>Create a capture of you visiting your website by: </p>
<ul>
<li>Open Wireshark, begin a capture</li>
<li>Quickly open a new tab and visit your website in your browser</li>
<li>Once it has fully loaded end your Wireshark capture.</li>
</ul>
<p>Now <strong>filter</strong> for DNS packets only in the display filter.</p>
<ul>
<li>Identify the DNS response containing the information you needed in order to convert your website name into an IP address.</li>
<li>Use the information contained within that packet for the following deliverable.</li>
</ul>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Learn how to use the search tool to find string content or research display filters that allow you to specify the domain name.</p>
</div>
<p><strong>Report</strong>: </p>
<ol start="10">
<li>
<p>Assuming almost all of the DNS requests you see in Wireshark right now are for the one website you visited, how many DNS requests do you see? </p>
</li>
<li>
<p>Overall were there less or more DNS queries than you'd expect?</p>
</li>
<li>
<p>How did you identify the DNS packet(s) associated with the website you visited?</p>
</li>
<li>
<p>Provide screenshots of the packet(s) (specifically of the DNS information in Packet Details).</p>
</li>
<li>
<p>List the ip addresses you received for the website from the DNS server that resolved your request.</p>
</li>
<li>
<p>Which <em>transport layer protocol</em> (<a href="https://bwalchen.github.io/314-docs/course-prep/osi/">think OSI model</a>) is used to carry the DNS packet?</p>
</li>
<li>
<p>Compare this DNS response to others in the capture (generate more if needed).</p>
</li>
<li>
<p>Which port number(s) are shared in common across these DNS requests?</p>
</li>
</ol>
<h2 id="part-v-security">Part V - security<a class="headerlink" href="#part-v-security" title="Permanent link">&para;</a></h2>
<p>Open two packets in bytes view, a dns and a http packet that is encrypted with tls.</p>
<ul>
<li>Double click one of the DNS packets in order to be able to see the bytes view. </li>
<li>Remove the dns display filter and replace it with tls (web traffic). </li>
<li>Open one of the tls packets in byte view too.</li>
</ul>
<p><strong>Report</strong>: </p>
<ol start="18">
<li>
<p>Examine the bytes view of the two packets. Do you see any human
    readable values in the output?</p>
</li>
<li>
<p>Looking at these two packets and others in your capture, does Wireshark provide any clues about whether or not your DNS is encrypted?</p>
</li>
<li>
<p>Does it provide any clues on whether your web traffic is encrypted?</p>
</li>
</ol>
<p>Attacker:</p>
<ol start="21">
<li>
<p>What information might an outside observer be able to glean about your computing activities by capturing your DNS traffic?</p>
</li>
<li>
<p>Was any discernible information revealed (as far as you can tell) through your web traffic?</p>
</li>
</ol></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 Clinton Campbell</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
