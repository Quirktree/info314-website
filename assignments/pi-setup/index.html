<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Clinton Campbell">
        <link rel="canonical" href="https://info314.tcpip.dev/assignments/pi-setup/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Raspberry Pi Setup - INFO 314 Course Resources</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/color-brewer.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">INFO 314 Course Resources</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">1 - Pi Setup</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active">Raspberry Pi Setup</a>
</li>
            
<li>
    <a href="../../resources/wifi-reference/" class="dropdown-item">Wireless Configuration Reference</a>
</li>
            
<li>
    <a href="../../resources/uw-wireless/" class="dropdown-item">UW Wireless Reference</a>
</li>
            
<li>
    <a href="../networkd-setup/" class="dropdown-item">networkd Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2 - Set up a DHCP Server</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/address-planning/" class="dropdown-item">IP Address Planning Reference</a>
</li>
            
<li>
    <a href="../dhcp-setup/" class="dropdown-item">Installing and Configuring the ISC DHCP Server</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">3 - Configure Routing and NAT</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../router-setup/" class="dropdown-item">Router Setup</a>
</li>
            
<li>
    <a href="../../resources/nftables/" class="dropdown-item">Introduction to nftables</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">4 - Configure a DNS Resolver</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../resolver-setup/" class="dropdown-item">DNS Resolver Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Report - NAT and DNS Analysis</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../analysis-report/" class="dropdown-item">Instructions</a>
</li>
            
<li>
    <a href="../../resources/tshark-install/" class="dropdown-item">Installing TShark</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">5 - Configure an Authoritative Name Server</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../dns-zone-setup/" class="dropdown-item">Authoritative Zone Setup</a>
</li>
            
<li>
    <a href="../../resources/zone-file-format/" class="dropdown-item">DNS Zone Reference</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Extra Credit</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="/" class="dropdown-item">VLAN Challenge</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Labs <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../wireshark01/" class="dropdown-item">Lab 1 - Analyzing DHCP and ARP with Wireshark</a>
</li>
                                    
<li>
    <a href="../wireshark02/" class="dropdown-item">Lab 2 - Analyze DNS & HTTP in Wireshark</a>
</li>
                                    
<li>
    <a href="../wireshark03/" class="dropdown-item">Lab 3 - Analyze Zeroconf in Wireshark</a>
</li>
                                    
<li>
    <a href="/assignments/wireshark04.md" class="dropdown-item">Lab 4 - Analyze TCP with ncat and Wireshark</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting Started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/markdown/" class="dropdown-item">Intro to Markdown</a>
</li>
            
<li>
    <a href="../../resources/bash/" class="dropdown-item">Intro to Bash</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Concepts and Theory</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/address-planning/" class="dropdown-item">Basic IP Address Planning</a>
</li>
            
<li>
    <a href="../../notes/dns-overview/" class="dropdown-item">Domain Name System (DNS)</a>
</li>
            
<li>
    <a href="../../resources/zone-file-format/" class="dropdown-item">DNS Zone Files</a>
</li>
            
<li>
    <a href="../../notes/ethernet-switches/" class="dropdown-item">Ethernet Switches</a>
</li>
            
<li>
    <a href="../../notes/router-overview/" class="dropdown-item">Routers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Core Settings and Tools</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/ssh-primer/" class="dropdown-item">Getting Started with SSH</a>
</li>
            
<li>
    <a href="../../resources/ssh-agent/" class="dropdown-item">Using the SSH Agent</a>
</li>
            
<li>
    <a href="../../resources/wireshark-install/" class="dropdown-item">Install Wireshark</a>
</li>
            
<li>
    <a href="../../resources/tshark-install/" class="dropdown-item">Install TShark</a>
</li>
            
<li>
    <a href="../../resources/host-config/" class="dropdown-item">Mac/Win/Linux Networking</a>
</li>
            
<li>
    <a href="../../resources/manage-dhcp/" class="dropdown-item">Troubleshooting DHCP</a>
</li>
            
<li>
    <a href="../../resources/dns-clients/" class="dropdown-item">Managing DNS Clients</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">General Linux Networking</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Firewalls</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/nftables/" class="dropdown-item">Introduction to nftables</a>
</li>
            
<li>
    <a href="../../resources/netfilter-hooks/" class="dropdown-item">Understanding netfilter Hooks</a>
</li>
            
<li>
    <a href="../../resources/iptables/" class="dropdown-item">Introduction to iptables</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Network Interfaces</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/loopback-interfaces/" class="dropdown-item">Loopback Interfaces</a>
</li>
            
<li>
    <a href="../../resources/dummy-interfaces/" class="dropdown-item">Dummy Interfaces</a>
</li>
            
<li>
    <a href="../../resources/vlan-interfaces/" class="dropdown-item">VLAN Interfaces</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Virtual Private Networking</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/setup-wireguard/" class="dropdown-item">Install and Configure WireGuard</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Wireless</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/wifi-reference/" class="dropdown-item">wpa_supplicant Reference</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Free Range Routing</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/setup-frr/" class="dropdown-item">Install Free Range Routing (FRR)</a>
</li>
            
<li>
    <a href="../../resources/configure-routing-links/" class="dropdown-item">Configuring Routing Links</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">University of Washington Networks</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../resources/uw-wireless/" class="dropdown-item">UW Wireless Network Reference</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../.." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../resources/wifi-reference/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/quirktree/info314-website" class="nav-link">quirktree/info314-website</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#raspberry-pi-setup-guide-2022-03-29" class="nav-link">Raspberry Pi Setup Guide (2022-03-29)</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#before-you-start" class="nav-link">Before you start</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#install-raspberry-pi-os" class="nav-link">Install Raspberry Pi OS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#initial-boot" class="nav-link">Initial Boot</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#enable-passwordless-login" class="nav-link">Enable Passwordless Login</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#connect-to-wifi" class="nav-link">Connect to Wifi</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#update-software-packages" class="nav-link">Update Software Packages</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#graceful-shutdown" class="nav-link">Graceful Shutdown</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#tips-and-troubleshooting" class="nav-link">Tips and Troubleshooting</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="raspberry-pi-setup-guide-2022-03-29">Raspberry Pi Setup Guide (2022-03-29)<a class="headerlink" href="#raspberry-pi-setup-guide-2022-03-29" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This guide will walk you through the steps necessary to install Raspberry Pi OS on your Pi and connect it to Wifi. While we encourage you to search online and use other resources when you encounter questions, it's important that you follow our instructions closely. Though there are many different guides that can help you accomplish the same objectives, this guide has been built based on the needs and requirements of our projects and introduces you to tools you will need throughout the quarter.</p>
<p>The core sections of this guide will walk you through the following steps:</p>
<ol>
<li>Install the Raspberry Pi OS on a microSD</li>
<li>Enable SSH for <em>headless</em> management</li>
<li>Set locale and other base configuration</li>
<li>Configure wifi connections</li>
<li>Update Raspberry Pi OS and installing additional packages with <code>apt</code></li>
</ol>
<p>To complete these steps, you will need all of the following items:</p>
<ol>
<li>Computer running a recent desktop OS, such as: macOS 11+, Windows 10+, or a desktop Linux distribution</li>
<li>Ethernet network interface (built-in or USB adapter)</li>
<li>Media card reader supporting microSD (built-in or USB adapter)</li>
<li>Unused 8GB+ microSD card (you may repurpose an existing card, but be aware that all contents will be wiped)</li>
</ol>
<p>Before you start setting up your Pi, please review the tasks in the following section. These steps are particularly important for students running Windows and Linux.</p>
<h2 id="before-you-start">Before you start<a class="headerlink" href="#before-you-start" title="Permanent link">&para;</a></h2>
<h3 id="windows-users">Windows Users<a class="headerlink" href="#windows-users" title="Permanent link">&para;</a></h3>
<h4 id="enable-the-built-in-openssh-client">Enable the built-in OpenSSH Client<a class="headerlink" href="#enable-the-built-in-openssh-client" title="Permanent link">&para;</a></h4>
<p>All current versions of Windows 10 and 11 ship with an OpenSSH client, though the feature may be disabled by default. Follow the instructions here to enable this feature.</p>
<ol>
<li>Navigate to <em>Settings</em> -&gt; <em>Apps</em> -&gt; <em>Optional features</em></li>
<li>Click on <em>Add an optional feature</em></li>
<li>Enter <em>OpenSSH</em> and select the <em>OpenSSH Client</em></li>
<li>Click next to install</li>
</ol>
<h4 id="text-editor">Text Editor<a class="headerlink" href="#text-editor" title="Permanent link">&para;</a></h4>
<p>Among the many subtle differences between Windows and Unix-based machines is a difference in the control characters used to terminate lines in text files. In many cases, this difference will prevent Linux from parsing a file you've written and copied from Windows.</p>
<p>To avoid this issue, install a code-oriented text editor that can be configured to use Unix-style line endings and use it exclusively for the labs and projects throughout this course. <strong>Visual Studio Code</strong> and <strong>Atom</strong> are common options.</p>
<p>To configure <strong>VS Code</strong> to use Unix-style line endings:</p>
<ol>
<li>Open Settings</li>
<li>Search for the term “Eol”</li>
<li>Change the default end of line character to <em>\n</em></li>
</ol>
<p>To configure <strong>Atom</strong> to use Unix-style line endings:</p>
<ol>
<li>Open Settings</li>
<li>Navigate to Packages / Line Ending Selector</li>
<li>Change the <em>Default line ending</em> to <em>LF</em></li>
</ol>
<h4 id="terminal">Terminal<a class="headerlink" href="#terminal" title="Permanent link">&para;</a></h4>
<p>Except when otherwise noted, I recommend that Windows users complete all Linux networking exercises within Windows PowerShell rather than Git Bash or the Command Prompt.</p>
<div class="admonition info recommendation">
<p class="admonition-title">Info</p>
<p>For a much improved working experience, you should use the new <strong>Windows Terminal</strong> application. Terminal is available in the <strong>Microsoft Store</strong> for Windows 10 users and it is shipped pre-installed with Windows 11.</p>
<p>By default, the terminal will run PowerShell, but it also supports Command Prompt and Windows Subsystem for Linux. </p>
</div>
<h3 id="linux-users">Linux Users<a class="headerlink" href="#linux-users" title="Permanent link">&para;</a></h3>
<p>Using your default package manager (likely <code>yum</code> or <code>apt</code>), confirm that <strong>Avahi mDNS</strong> services are installed (mDNS is typically part of the default distribution).</p>
<h2 id="install-raspberry-pi-os">Install Raspberry Pi OS<a class="headerlink" href="#install-raspberry-pi-os" title="Permanent link">&para;</a></h2>
<p>The Raspberry Pi is a single-board computer built with Linux distributions in mind. The official operating system, which we'll use in our labs is known as <strong>Raspberry Pi OS</strong> and is based on Debian Linux. If you're familiar with Ubuntu or Arch Linux, you should be mostly at home working in Raspberry Pi OS. Don't worry if Linux is not your jam. We'll provide plenty of guidance so that you can focus your energy on network concepts.</p>
<h3 id="write-raspberry-pi-os-to-microsd">Write Raspberry Pi OS to MicroSD<a class="headerlink" href="#write-raspberry-pi-os-to-microsd" title="Permanent link">&para;</a></h3>
<ol>
<li>Download the Raspberry Pi Imager from <a href="https://www.raspberrypi.com/software/">https://www.raspberrypi.com/software/</a> and launch the software</li>
<li>Click the button labeled <em>CHOOSE OS</em></li>
<li>Select <strong>Raspberry Pi OS (other)</strong> and scroll down to find <strong>Raspberry Pi OS Lite (64-bit)</strong></li>
<li>Insert a microSD card into your card reader and proceed with the install.</li>
</ol>
<p>Unlike the full version of the operating system, <strong>Raspberry Pi OS Lite</strong> is completely text-based and is well-suited for <em>headless</em> operation. There isn't a graphical desktop environment, but you won't need it. All of projects in this course will be completed in a remote command-line interface (CLI).</p>
<h3 id="update-configuration">Update Configuration<a class="headerlink" href="#update-configuration" title="Permanent link">&para;</a></h3>
<p>Etcher will eject the microSD once the image is completely rewritten. We want to edit some files on the SD, so you will need to briefly remove the card before inserting it again.</p>
<p>On macOS or Windows, you'll be limited to accessing the boot partition of the card. Use Explorer or Finder to locate and open the partition. </p>
<p>You must complete the following step before the first boot.</p>
<h4 id="enable-ssh">Enable SSH<a class="headerlink" href="#enable-ssh" title="Permanent link">&para;</a></h4>
<p>Due to security considerations, the newest versions of Raspian disable SSH by default, but it's easy to turn the feature on so that we can connect to the Pi without requiring a monitor and keyboard.</p>
<p>To enable SSH on the first boot, add an empty file named ssh to the boot volume. There are many ways to create this file. If you want to use the command-line, follow the instructions below (macOS and Windows):</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">macOS</label><label for="__tabbed_1_2">Windows</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp"># </span>Unix-based systems mount external storage to a path <span class="k">in</span> the directory tree. For a freshly written Raspberry Pi OS image, this path will be /Volumes/boot.
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">touch /Volumes/boot/ssh</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="go"># Windows mounts external storage to a drive letter. Replace E: with the letter assigned on your system.</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="go">New-Item -type File E:\ssh</span>
</code></pre></div>
</div>
</div>
</div>
<p>Raspberry Pi OS checks for /boot/ssh during startup. When present, the OS enables the OpenSSH <em>daemon</em> and deletes the file. </p>
<div class="admonition information">
<p class="admonition-title">Information</p>
<p><em>Daemon</em> is a computing term used to describe software that runs in the background, e.g., to provide a service for network-based clients. The term is most commonly associated with Unix-flavored operating systems.</p>
</div>
<h2 id="initial-boot">Initial Boot<a class="headerlink" href="#initial-boot" title="Permanent link">&para;</a></h2>
<p>It's time to boot the Pi for the first time. Close your editor and any windows that are open to the microSD so that you can eject the card gracefully from your OS. </p>
<ol>
<li>Remove the microSD and insert into the card slot on your Pi.</li>
<li>Connect power to the designated micro-USB port.</li>
<li>Attach to your computer with an Ethernet cable and get ready to launch an SSH connection.</li>
<li>From terminal or PowerShell, connect to the Pi for the first time by running the following command:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># The default password for pi is raspberry</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>ssh pi@raspberrypi.local
</code></pre></div>
<p>This command directs your local SSH client to connect to a network host named <code>raspberrypi.local</code> with the username <code>pi</code>. Since you haven't connected to this device before, SSH should ask you to accept the connection of an unknown device before presenting you with a password prompt. </p>
<div class="admonition information">
<p class="admonition-title">Information</p>
<p>Before the SSH client can initiate it's connection to the Pi, it must find the IP address associated with <em>raspberrypi.local</em>. This process is called resolution and will be completed using a protocol known as multicast DNS (mDNS). </p>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$ ssh pi@raspberrypi.local
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>The authenticity of host &#39;raspberrypi.local (fe80::1b9c:bcf2:acd6:bbbe%42)&#39; can&#39;t be established.
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>ECDSA key fingerprint is SHA256:QqhpMybvctuIxV03xcnlANU3cxWM1JhvSYxloSd69Rw.
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>Are you sure you want to continue connecting (yes/no)?
</code></pre></div>
<p>If you had previously connected to a different host with the name <code>raspberrypi.local</code>, you may also see the warning shown below (please refer to the troubleshooting section to resolve this error):</p>
<div class="local">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
</code></pre></div>
</div>

<p>After confirming the prompt shown above, you will see another short message followed by a password prompt.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Warning: Permanently added &#39;raspberrypi.local,fe80::1b9c:bcf2:acd6:bbbe%42&#39; (ECDSA) to the list of known hosts.
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>pi@raspberrypi.local&#39;s password:
</code></pre></div>
<p>The default password for the <code>pi</code> user is <code>raspberry</code>. Once login is complete, you should be greeted with a message similar to that shown here.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Linux raspberrypi 4.14.79-v7+ #1159 SMP Sun Nov 4 17:50:20 GMT 2018 armv7l
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>The programs included with the Debian GNU/Linux system are free software;
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>the exact distribution terms for each program are described in the
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>individual files in /usr/share/doc/*/copyright.
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>permitted by applicable law.
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>Linux raspberrypi 4.14.79-v7+ #1159 SMP Sun Nov 4 17:50:20 GMT 2018 armv7l
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>The programs included with the Debian GNU/Linux system are free software;
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>the exact distribution terms for each program are described in the
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>individual files in /usr/share/doc/*/copyright.
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>permitted by applicable law.
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>SSH is enabled and the default password for the &#39;pi&#39; user has not been changed.
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>This is a security risk - please login as the &#39;pi&#39; user and type &#39;passwd&#39; to set a new password.
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>Wi-Fi is disabled because the country is not set.
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>Use raspi-config to set the country before use.
<a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
<a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>pi@raspberrypi:~ $
</code></pre></div>
<h3 id="choose-a-new-password">Choose a New Password<a class="headerlink" href="#choose-a-new-password" title="Permanent link">&para;</a></h3>
<p>Before proceeding further with setup, you should change the default password by entering the <code>passwd</code> at the command prompt. You will be guided through three prompts to enter the current password and then to update/confirm the new password.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>SSH is a favorite target of malicious attackers. Nothing makes their lives easier than devices that are configured with the default password for the type of system.</p>
</div>
<h3 id="default-configuration">Default Configuration<a class="headerlink" href="#default-configuration" title="Permanent link">&para;</a></h3>
<p>Several additional steps are required to prepare your Pi for future projects. While some of these steps may not seem essential, omitting them might pose consequences when trying to troubleshoot problems later in the course. </p>
<p>Setting the timezone will ensure that log messages are displayed in local time, which is quite helpful for troubleshooting.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a># You can see a list of timezones by running `timedatectl list-timezones`
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>sudo timedatectl set-timezone America/Los_Angeles
</code></pre></div>
<p>Raspberry Pi OS defaults to a British locale. This can cause issues if we ever need to troubleshoot your device using an external keyboard. Configure the locale and keymap to prevent these issues.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># Update /etc/locale.gen with your preferences
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>sudo nano /etc/locale.gen # Find and uncomment the en_US.UTF-8 locale 
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a># Re-generate locale information after updating the locale.gen file
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>sudo locale-gen 
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a># Apply new settings
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>sudo localectl set-locale &quot;LANG=en_US.UTF-8&quot;
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>sudo localectl set-keymap us
</code></pre></div>
<p>Occasionally we'll end up running a program that uses the default editor settings for your profile (or root if we have run the program with <em>sudo</em>). It's helpful to have these configured so that you don't end up stuck in <em>vi</em> or <em>ed</em> without any way to exit.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a># Update default editor selections for the pi user
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>select-editor
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a># Modify the same setting for commands that require root privileges.
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>sudo select-editor
</code></pre></div>
<h3 id="retain-logs-between-boots">Retain Logs Between Boots<a class="headerlink" href="#retain-logs-between-boots" title="Permanent link">&para;</a></h3>
<p>In recent versions of Raspberry Pi OS, system logs are collected by the <strong>journald</strong> service. In the default configuration, logs are not retained between reboots of your Pi.</p>
<p>To ensure that logs are available when you need to debug, you can enable log retention by running the following commands.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a># Create the location for persistent log messages
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>sudo mkdir -p /var/log/journal
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>sudo systemd-tmpfiles --create --prefix /var/log/journal
</code></pre></div>
<h3 id="update-hostname">Update Hostname<a class="headerlink" href="#update-hostname" title="Permanent link">&para;</a></h3>
<p>At first boot, we could locate our Pi on the network based on the default hostname of <strong>raspberrypi.local</strong>. This is fine in an isolated, point-to-point network, but it's a problem when we connect to shared networks. </p>
<p>Use the <code>hostnamectl</code> command to set a <em>unique</em> name for your device.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a># This little pi likes to be called Titan
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>sudo hostnamectl set-hostname titan
</code></pre></div>
<p>The main change that <strong>hostnamectl</strong> makes is visible in <code>/etc/hostname</code>. We also need to update references to the hostname in <code>/etc/hosts</code>. The <strong>hosts file</strong> is present on most Operating Systems and provides a way of defining hostname/IP address associations without relying on DNS. Linux uses this file to associate your hostname to the loopback IP address.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a># Confirm your hostname is up to date in /etc/hostname
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>cat /etc/hostname
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a># Replace any references to raspberrypi in /etc/hosts
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>sudo nano /etc/hosts
</code></pre></div>
<details class="faq">
<summary>FAQ: Why is <code>sudo</code> slow</summary>
<p>You might notice odd warnings and sudo latency immediately after changing the hostname. These should clear up once you update the <strong>hosts file</strong>. For reasons beyond the scope of this curriculum, <strong>sudo</strong> performs DNS lookups as part of its check to determine whether the current user is permitted to elevate privileges. The delay you experience is the tool waiting for a DNS response prior to its timeout.</p>
</details>
<p>In order for the <em>hostname</em> changes to take full effect, reboot your pi by calling <code>sudo reboot now</code>. After 20 - 30 seconds your pi will be visible with the new name -- you will need to include the <code>.local</code> suffix on any command referencing the name.</p>
<details class="example">
<summary>Example</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># ping by mDNS hostname
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>ping titan.local
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a># ssh by mDNS hostname
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>ssh pi@titan.local
</code></pre></div>
</details>
<h2 id="enable-passwordless-login">Enable Passwordless Login<a class="headerlink" href="#enable-passwordless-login" title="Permanent link">&para;</a></h2>
<p>We can significantly simplify the process of managing our Pi’s by copying our public SSH keys into the <code>authorized_keys</code> file of the default pi user.</p>
<p>To prepare the Raspberry Pi, we need to create a remote directory under the <code>pi</code> user's home directory. If you're still logged into your pi, you can create the directory using <code>mkdir ~/.ssh</code>. After that is done, type <code>exit</code> to terminate the connection and return to your local command prompt.  </p>
<details class="faq">
<summary>FAQ: Why aren't <code>ssh</code> and <code>scp</code> working</summary>
<p>Please review the previous set of instructions closely. The commands below are run from your <strong>local</strong> shell. Running them inside of an existing SSH session will not have the effect you are looking for.</p>
</details>
<p>With the directory in place, copy your public key (most likely <code>~/.ssh/id_ed25519.pub</code>) to the pi using the <code>scp</code> command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>scp $HOME/.ssh/id_ed25519.pub pi@raspberrypi.local:.ssh/authorized_keys
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The second set of parameters in this command specifies the user (<code>pi</code>) the host (<code>titan.local</code>) and the location of the new file (<code>.ssh/authorized_keys</code>). Like <code>ssh</code>, <code>scp</code> is a user-based tool and will be executed relative to the home directory of the authenticated user (<code>/home/pi</code>). We can override the default by specifying an absolute path beginning with a <code>/</code>, e.g., <code>/home/pi/.ssh/authorized_keys</code>.</p>
</div>
<p><br>
<br></p>
<h2 id="connect-to-wifi">Connect to Wifi<a class="headerlink" href="#connect-to-wifi" title="Permanent link">&para;</a></h2>
<hr />
<p>To complete this guide, you will need to establish Internet connectivity for your Pi. Since the Pi 4 has integrated wireless capabilities, we can solve the problem by connecting to local wifi.</p>
<h3 id="set-the-wireless-network-locale">Set the Wireless Network Locale<a class="headerlink" href="#set-the-wireless-network-locale" title="Permanent link">&para;</a></h3>
<p>Wireless networks operate in radio frequency (RF) ranges that are subject to regulation in the geographic region that the network is operated. Before turning on the wireless features of your Raspberry Pi, set the regulatory domain to the United States.</p>
<p>There are several ways to modify wireless settings on your Pi. For now, we'll use the <code>wpa_cli</code> command to interactively modify the settings. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a># Launch wpa_cli interactively
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>wpa_cli -i wlan0
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a># Enter the following commands at the wpa_cli prompt
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>get country 
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a># Returns two letter code for current setting regulatory domain
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>set country US
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a># Returns OK
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>save_config
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a># Returns OK
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>quit
</code></pre></div>
<h3 id="enable-the-wireless-interface">Enable the Wireless Interface<a class="headerlink" href="#enable-the-wireless-interface" title="Permanent link">&para;</a></h3>
<p>Recent versions of the operating system use a system feature named <strong><a href="https://01.org/linuxgraphics/gfx-docs/drm/driver-api/rfkill.html#rfkill-rf-kill-switch-support">rfkill</a></strong> to disable the WiFi radio by default. Before you can connect to any networks, you'll need to remove this block.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>sudo rfkill unblock wlan
</code></pre></div>
<h3 id="configure-the-wpa-supplicant">Configure the WPA Supplicant<a class="headerlink" href="#configure-the-wpa-supplicant" title="Permanent link">&para;</a></h3>
<p>Wireless settings for the Pi are controlled by a service called <em>wpa_supplicant</em>, which stores network connection settings inside <code>/etc/wpa_supplicant/wpa_supplicant.conf</code>. You already saw an example of modifying these settings through <code>wpa_cli</code>. For the following task, I recommend that you edit the file directly in a text editor of your choice.</p>
<p>Before you make any changes, take a look at the default configuration by running <code>sudo cat /etc/wpa_supplicant/wpa_supplicant.conf</code> (sudo is required since this file is only readable to root). You should see something like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>country=US
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>update_config=1
</code></pre></div>
<p>If you are editing the file on your own computer, paste these lines at the top of the file and add the rest of your changes below them. You will be adding a network definition for each WLAN that you want to use. Detailed configuration instructions are available in <a href="/resources/wifi-reference/" target="_blank">WPA Supplicant Configuration Reference</a>.</p>
<p>For this project, use the configuration reference to set up the following networks:</p>
<ol>
<li><a href="/resources/wifi-reference/#wpa2-enterprise-networks" target="_blank">Eduroam (w/ Certificate Based Authentication)</a></li>
<li><a href="/resources/wifi-reference/#wpa2-personal-networks" target="_blank">(Optional) UW MPSK Network</a><ul>
<li><a href="/resources/uw-wireless/#uw-mpsk-network-onboarding" target="_blank">Requires Device Registration</a></li>
</ul>
</li>
<li><a href="/resources/wifi-reference/#wpa2-personal-networks" target="_blank">(Optional) Home Network</a></li>
</ol>
<h3 id="testing-wireless-connections">Testing Wireless Connections<a class="headerlink" href="#testing-wireless-connections" title="Permanent link">&para;</a></h3>
<p>When you are finished updating <code>wpa_supplicant.conf</code> reconfigure the wireless interface by calling <code>wpa_cli -i wlan0 reconfigure</code>. The command should return <code>OK</code> after a few seconds. Check that you are attached to the wireless network by calling <code>wpa_cli -i wlan0 status</code>.</p>
<div class="admonition information">
<p class="admonition-title">Information</p>
<p>You previously ran the <em>wpa_cli</em> tool in interactive mode. The instructions above pass individual commands and return you directly to the Linux command prompt. This method is quick and convenient, but if you run into problems, interactive mode will provide the most information for debugging purposes.</p>
</div>
<details class="example">
<summary>Example of a successful connection</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>wpa_cli -i wlan0 status
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>&lt;3&gt;Trying to associate with SSID &#39;eduroam&#39;
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>&lt;3&gt;Associated with 1c:28:af:07:55:31
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>&lt;3&gt;CTRL-EVENT-EAP-STARTED EAP authentication started
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>&lt;3&gt;CTRL-EVENT-EAP-STATUS status=&#39;started&#39; parameter=&#39;&#39;
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>&lt;3&gt;CTRL-EVENT-SUBNET-STATUS-UPDATE status=0
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>&lt;3&gt;CTRL-EVENT-EAP-PROPOSED-METHOD vendor=0 method=13
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>&lt;3&gt;CTRL-EVENT-EAP-STATUS status=&#39;accept proposed method&#39; parameter=&#39;TLS&#39;
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>&lt;3&gt;CTRL-EVENT-EAP-METHOD EAP vendor 0 method 13 (TLS) selected
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>&lt;3&gt;CTRL-EVENT-EAP-PEER-CERT depth=2 subject=&#39;/C=US/ST=New Jersey/L=Jersey City/O=The USERTRUST Network/CN=USERTrust RSA Certification Authority&#39; hash=e793c9b02fd8aa13e21c31228accb08119643b749c898964b1746d46c3d4cbd2
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>&lt;3&gt;CTRL-EVENT-EAP-PEER-CERT depth=2 subject=&#39;/C=US/ST=New Jersey/L=Jersey City/O=The USERTRUST Network/CN=USERTrust RSA Certification Authority&#39; cert=308205de308203c6a003020102021001fd6d30fca3ca51a81bbc640e35032d300d06092a864886f70d01010c0500308188310b3009060355040613025553311330110603550408130a4e6577204a6572736579311430120603550407130b4a65727365792043697479311e301c060355040a131554686520555345525452555354204e6574776f726b312e302c06035504031325555345525472757374205253412043657274696669636174696f6e20417574686f72697479301e170d3130303230313030303030305a170d3338303131383233353935395a308188310b3009060355040613025553311330110603550408130a4e6577204a657273657931...
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>&lt;3&gt;CTRL-EVENT-EAP-PEER-ALT depth=0 DNS:radius.uw.edu
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>&lt;3&gt;CTRL-EVENT-EAP-PEER-ALT depth=0 DNS:radius.washington.edu
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>&lt;3&gt;CTRL-EVENT-EAP-STATUS status=&#39;remote certificate verification&#39; parameter=&#39;success&#39;
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>&lt;3&gt;CTRL-EVENT-EAP-STATUS status=&#39;completion&#39; parameter=&#39;success&#39;
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>&lt;3&gt;CTRL-EVENT-EAP-SUCCESS EAP authentication completed successfully
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>&lt;3&gt;CTRL-EVENT-CONNECTED - Connection to 1c:28:af:07:55:31 completed [id=0 id_str=]
</code></pre></div>
</details>
<h3 id="verify-connection">Verify Connection<a class="headerlink" href="#verify-connection" title="Permanent link">&para;</a></h3>
<p>In addition to <code>wpa_cli</code>, there are several tools that can be used to check the current state of your wireless interface and determine whether it has received a valid configuration from DHCP.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a># Show the current state of the wlan0 interface
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>ip link show wlan0
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DORMANT group default qlen 1000
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    link/ether b8:27:eb:db:fe:93 brd ff:ff:ff:ff:ff:ff
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a># Show address configuration for the wlan0 interface
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>ip addr show wlan0
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>    link/ether b8:27:eb:db:fe:93 brd ff:ff:ff:ff:ff:ff
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>    inet 10.18.185.176/15 brd 10.19.255.255 scope global wlan0
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>       valid_lft forever preferred_lft forever
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>    inet6 fe80::ce14:df50:b3f0:9c2a/64 scope link
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>       valid_lft forever preferred_lft forever
</code></pre></div>
<h2 id="update-software-packages">Update Software Packages<a class="headerlink" href="#update-software-packages" title="Permanent link">&para;</a></h2>
<hr />
<p>Let's finalize the initial setup by checking for updates to Raspberry Pi OS and its default packages (this can take a few minutes on slow networks).</p>
<p>As a Debian based Linux distribution, Raspberry Pi OS relies on <code>apt</code> for package management. The <code>apt update</code> command is used to determine whether there are new packages to download.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>sudo apt update
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>sudo apt upgrade
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>sudo apt dist-upgrade
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a># We&#39;ve found that an additional update is sometimes needed after a dist-upgrade
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>sudo apt update
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a># Install some useful packages while you&#39;re at it
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>sudo apt install dnsutils
</code></pre></div>
<h2 id="graceful-shutdown">Graceful Shutdown<a class="headerlink" href="#graceful-shutdown" title="Permanent link">&para;</a></h2>
<p>Never yank the power from your Pi when it's time to quit. This can lead to data corruption on the microSD (they aren't as resilient as the drives installed in your laptop). </p>
<p>Instead, you should always issue a proper shutdown via SSH.</p>
<p>From an SSH connection, run <code>sudo poweroff</code>. If you ever need to reboot the Pi, call <code>sudo reboot now</code>.</p>
<p>Wait about 15 - 20 seconds to allow the Pi to complete it’s shutdown process before disconnecting the power.</p>
<p><br>
<br></p>
<h2 id="tips-and-troubleshooting">Tips and Troubleshooting<a class="headerlink" href="#tips-and-troubleshooting" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="cant-find-raspberrypilocal">Can't find raspberrypi.local<a class="headerlink" href="#cant-find-raspberrypilocal" title="Permanent link">&para;</a></h3>
<p>If you can't make an initial connection to the Raspberry Pi, verify the following requirements were satisfied:</p>
<ul>
<li>Raspberry Pi OS has been successfully written to microSD card<ul>
<li>Test again with a known good SD card</li>
</ul>
</li>
<li><a href="#enable-ssh">OpenSSH daemon was enabled</a> before booting the Pi[^ssh_gone]</li>
<li>Physical connection is healthy<ul>
<li>Make sure that both ends of the cable are completely inserted</li>
<li>Try an alternate cable, or test the cable with another device</li>
</ul>
</li>
<li>Network interface is functional<ul>
<li>Check for link lights on both network interfaces</li>
<li>Verify that your network adapter is visible to the OS</li>
<li>Determine whether your network adapter requires <a href="#missing-network-drivers">drivers</a></li>
</ul>
</li>
<li>Network interface is assigned a <a href="#link-local-addresses">link local address</a></li>
<li>Current system configuration supports <a href="#multicast-dns">multicast DNS (mDNS)</a></li>
</ul>
<p>[^ssh_gone] Raspberry Pi OS will remove the /boot/ssh file after enabling the service. You do not need to restore the file if you find that it has disappeared.</p>
<h4 id="missing-network-drivers">Missing Network Drivers<a class="headerlink" href="#missing-network-drivers" title="Permanent link">&para;</a></h4>
<p>If you are using a USB Ethernet port for the first time on your computer, it's possible that your first attempt to connect will be unsuccessful. Some issues are resolved simply by disconnecting the USB briefly and trying to connect again after you have plugged everything back in. </p>
<p>If your issues persist, check the manufacturer's support page or search to determine whether your computer needs additional drivers for the specific model of Ethernet adapter. If drivers are necessary, they will usually be available from the manufacturer's website.</p>
<h4 id="link-local-addresses">Link Local Addresses<a class="headerlink" href="#link-local-addresses" title="Permanent link">&para;</a></h4>
<p>Run <code>ipconfig</code> on Windows or <code>ifconfig</code> on other devices to confirm that the interface registers a network connection. The local IPv4 address for this interface should begin with <code>169.254.x.x</code> (link-local address range). Most devices will assign this type of address automatically if a DHCP cannot be found.</p>
<p><strong>Linux</strong> Some versions of Linux, e.g., Ubuntu, require you to choose between link-local addressing and DHCP. Explore your advanced adapter settings for Ethernet to change the adapter settings.</p>
<h4 id="multicast-dns">Multicast DNS<a class="headerlink" href="#multicast-dns" title="Permanent link">&para;</a></h4>
<p><strong>Windows</strong> Make sure that you are on a recent build of Windows 10 or Windows 11. Though mDNS is now a draft standard, Microsoft did not include a full client until late 2018. Support for mDNS on earlier versions of Windows relied on the Bonjour Print Services software that was once distributed by Apple in conjunction with iTunes and various other applications. </p>
<p><strong>Linux</strong> Desktop Linux distributions often support mDNS resolution using the Avahi daemon. Review the requirements at the <a href="#verify-support-for-mdns">beginning of this guide</a>.</p>
<h3 id="ssh-connection-warning">SSH Connection Warning<a class="headerlink" href="#ssh-connection-warning" title="Permanent link">&para;</a></h3>
<p>At some point, you are likely to receive the following warning when trying to launch <code>ssh</code>. In most cases, what you are seeing is expected behavior. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
</code></pre></div>
<p>The first time you connect to a host, SSH will bind a cryptographic signature to the hostname, e.g., <code>raspberrypi.local</code> and store it within <code>~/.ssh/known_hosts</code>. To prevent attacks, SSH warns us when the signature changes for a known host. </p>
<p>In our case, it's likely that there is another explanation for the mismatched signature since SSH will create a new private key every time we set up or rebuild a Raspberry Pi.</p>
<p>Since this is not an attack scenario, resolve the conflict with <code>ssh-keygen -R raspberrypi.local</code>, which will remove the existing entry. </p>
<div class="admonition bug">
<p class="admonition-title">Missing features in Windows SSH</p>
<p>The <code>ssh-keygen -R</code> feature isn't present before Windows 10 1809. If you are still running an older version of Windows, you will have to locate <code>known_hosts</code> within the <code>.ssh</code> configuration directory and remove the line indicated by the warning message.</p>
</div>
<h3 id="wireless-network-is-disabled">Wireless Network is Disabled<a class="headerlink" href="#wireless-network-is-disabled" title="Permanent link">&para;</a></h3>
<p>Check the state of your wireless network interface using the <code>rfkill list</code>. If a soft-block is listed for <code>wlan0</code>, it's likely that you skipped one or more previous steps. Double-check your <a href="#set-the-wireless-network-locale">wireless locale</a> and use rfkill to <a href="#enable-the-wireless-interface">enable your interface</a>. </p>
<h3 id="permission-denied-errors">Permission Denied Errors<a class="headerlink" href="#permission-denied-errors" title="Permanent link">&para;</a></h3>
<p>When we're performing system and network administration, we are often in need of <strong>root</strong> privileges. Running an administrative command without the appropriate privileges will result in a permissions-related error.</p>
<p>By default, the <strong>pi</strong> user is restricted in which parts of the system it can read and modify (Linux is heavily user-based in it's permissions model); however, the user is permitted to elevate itself to the admin level with <code>sudo</code> when it is necessary to perform privileged commands.</p>
<p>As a general security precaution, don't <code>sudo</code> commands unless it's necessary. For now, we'll indicate when that's the case. In later tasks, you will need to make this determination on your own.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2022 Clinton Campbell</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
